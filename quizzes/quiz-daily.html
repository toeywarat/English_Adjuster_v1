<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Quiz - Smart Learning System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="../js/attempts-client.js"></script>
  <script>const QUIZ_STARTED_AT = Date.now();</script>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col">

  <!-- Navbar -->
  <header class="bg-blue-900 text-white py-6 shadow">
    <div class="container mx-auto flex justify-between items-center px-6">
      <h1 class="text-2xl font-bold">English Adjuster</h1>
      <nav>
        <a href="../index.html" class="mr-4 hover:text-yellow-300">Home</a>
        <a href="../lessons/lessons.html" class="mr-4 hover:text-yellow-300">Lessons</a>
        <a href="quiz.html" class="hover:text-yellow-300">Quizzes</a>
        <a href="../profile.html" class="text-3xl text-yellow-300">ðŸ‘¤</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto px-6 py-12 max-w-3xl">
    <h2 class="text-3xl font-bold text-blue-900 mb-6 text-center">Daily Quiz</h2>
    <p class="text-center text-gray-700 mb-10">Come back every day for new practice questions!</p>
    <div class="bg-white p-8 rounded-lg shadow border border-gray-200 text-center">
      <p class="mb-6">AI-generated daily quiz will be shown here.</p>
      <button class="bg-blue-700 hover:bg-blue-900 text-white font-semibold py-3 px-8 rounded transition">
        Start Quiz
      </button>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white text-center py-4">
    <p>&copy; 2025 Smart Learning System. All rights reserved.</p>
  </footer>
<button onclick="window.history.back()"class="fixed top-4 left-4 text-white text-2xl hover:text-yellow-300 font-bold py-2 px-4 z-50 ">
    â‡¦
  </button>

<script>
  async function checkAnswers() {
    const form = document.getElementById('quizForm') || document.querySelector('form');
    const answers = form ? form.querySelectorAll('input[type="radio"]:checked') : [];
    const total = (form ? form.querySelectorAll('.bg-white.p-6.rounded-lg.shadow').length : 0) || (form ? form.querySelectorAll('h3').length : 0) || answers.length || 20;
    let score = 0;
    answers.forEach(ans => { if (ans.value === "true") score++; });
    const result = document.getElementById('result');
    if (result) result.innerText = `You got ${score} out of ${total} correct.`;

    try {
      const items = window.__attemptsClient ? window.__attemptsClient.buildItemsFromForm(form) : [];
      await (window.__attemptsClient ? window.__attemptsClient.saveAttempt({
        topic: document.title || "Daily Quiz - Smart Learning System",
        quizType: "topic",
        score,
        total: items.length || total,
        durationSec: Math.floor((Date.now() - (window.QUIZ_STARTED_AT || Date.now())) / 1000),
        startedAt: new Date(window.QUIZ_STARTED_AT || Date.now()).toISOString(),
        items
      }) : Promise.resolve());
      console.log("Attempt saved!");
    } catch (e) {
      console.error("Failed to save attempt:", e);
    }
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
  }
</script>
</body>
</html>
