<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pretest - Vocabulary</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-blue-900 text-white py-6 shadow">
    <div class="container mx-auto flex justify-between items-center px-6">
      <h1 class="text-2xl font-bold">English Adjuster</h1>
      <nav>
        <a href="../index.html" class="mr-4 hover:text-yellow-300">Home</a>
        <a href="../lessons/lessons.html" class="mr-4 hover:text-yellow-300">Lessons</a>
        <a href="../quizzes/quiz.html" class="hover:text-yellow-300">Quizzes</a>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-grow container mx-auto px-6 py-12">
    <h2 class="text-3xl font-bold text-blue-900 text-center mb-8">Vocabulary</h2>
    <form id="vocab-form" class="space-y-8 max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md">
      <!-- Questions -->
      <div>
        <p class="font-semibold">1. What is the opposite of “hot”?</p>
        <label class="block mt-2"><input type="radio" name="q1" value="a" required /> cold</label>
        <label class="block"><input type="radio" name="q1" value="b" /> warm</label>
        <label class="block"><input type="radio" name="q1" value="c" /> heat</label>
        <label class="block"><input type="radio" name="q1" value="d" /> fire</label>
      </div>
      <div>
        <p class="font-semibold">2. Which word means "a large vehicle for traveling on water"?</p>
        <label class="block mt-2"><input type="radio" name="q2" value="a" required /> plane</label>
        <label class="block"><input type="radio" name="q2" value="b" /> car</label>
        <label class="block"><input type="radio" name="q2" value="c" /> boat</label>
        <label class="block"><input type="radio" name="q2" value="d" /> truck</label>
      </div>
      <div>
        <p class="font-semibold">3. Choose the correct synonym for “happy”:</p>
        <label class="block mt-2"><input type="radio" name="q3" value="a" required /> tired</label>
        <label class="block"><input type="radio" name="q3" value="b" /> angry</label>
        <label class="block"><input type="radio" name="q3" value="c" /> sad</label>
        <label class="block"><input type="radio" name="q3" value="d" /> joyful</label>
      </div>
      <div>
        <p class="font-semibold">4. What does “quickly” mean?</p>
        <label class="block mt-2"><input type="radio" name="q4" value="a" required /> in a loud way</label>
        <label class="block"><input type="radio" name="q4" value="b" /> in a slow way</label>
        <label class="block"><input type="radio" name="q4" value="c" /> in a lazy way</label>
        <label class="block"><input type="radio" name="q4" value="d" /> in a fast way</label>
      </div>
      <div>
        <p class="font-semibold">5. What is the correct meaning of “teacher”?</p>
        <label class="block mt-2"><input type="radio" name="q5" value="a" required /> someone who fixes cars</label>
        <label class="block"><input type="radio" name="q5" value="b" /> someone who helps students learn</label>
        <label class="block"><input type="radio" name="q5" value="c" /> someone who sells food</label>
        <label class="block"><input type="radio" name="q5" value="d" /> someone who drives a taxi</label>
      </div>
      <div>
        <p class="font-semibold">6. What is a “bicycle”?</p>
        <label class="block mt-2"><input type="radio" name="q6" value="a" required /> a vehicle with two wheels</label>
        <label class="block"><input type="radio" name="q6" value="b" /> a kind of boat</label>
        <label class="block"><input type="radio" name="q6" value="c" /> a type of animal</label>
        <label class="block"><input type="radio" name="q6" value="d" /> a musical instrument</label>
      </div>
      <div>
        <p class="font-semibold">7. I always brush my ___ before bed.</p>
        <label class="block mt-2"><input type="radio" name="q7" value="a" required /> shoes</label>
        <label class="block"><input type="radio" name="q7" value="b" /> hair</label>
        <label class="block"><input type="radio" name="q7" value="c" /> hand</label>
        <label class="block"><input type="radio" name="q7" value="d" /> teeth</label>
      </div>
      <div>
        <p class="font-semibold">8. What does “tall” mean?</p>
        <label class="block mt-2"><input type="radio" name="q8" value="a" required /> short</label>
        <label class="block"><input type="radio" name="q8" value="b" /> high in height</label>
        <label class="block"><input type="radio" name="q8" value="c" /> big</label>
        <label class="block"><input type="radio" name="q8" value="d" /> small in size</label>
      </div>
      <div>
        <p class="font-semibold">9. What is the correct synonym of “important”?</p>
        <label class="block mt-2"><input type="radio" name="q9" value="a" required /> significant</label>
        <label class="block"><input type="radio" name="q9" value="b" /> usual</label>
        <label class="block"><input type="radio" name="q9" value="c" /> boring</label>
        <label class="block"><input type="radio" name="q9" value="d" /> loud</label>
      </div>
      <div>
        <p class="font-semibold">10. The student gave a very ___ answer to the question.</p>
        <label class="block mt-2"><input type="radio" name="q10" value="a" required /> dirty</label>
        <label class="block"><input type="radio" name="q10" value="b" /> clean</label>
        <label class="block"><input type="radio" name="q10" value="c" /> clever</label>
        <label class="block"><input type="radio" name="q10" value="d" /> sleepy</label>
      </div>
      <div>
        <p class="font-semibold">11. What does “exhausted” mean?</p>
        <label class="block mt-2"><input type="radio" name="q11" value="a" required /> very angry</label>
        <label class="block"><input type="radio" name="q11" value="b" /> very happy</label>
        <label class="block"><input type="radio" name="q11" value="c" /> very sad</label>
        <label class="block"><input type="radio" name="q11" value="d" /> very tired</label>
      </div>
      <div>
        <p class="font-semibold">12. What is the opposite of “generous”?</p>
        <label class="block mt-2"><input type="radio" name="q12" value="a" required /> kind</label>
        <label class="block"><input type="radio" name="q12" value="b" /> selfish</label>
        <label class="block"><input type="radio" name="q12" value="c" /> smart</label>
        <label class="block"><input type="radio" name="q12" value="d" /> rude</label>
      </div>
      <div>
        <p class="font-semibold">13. The scientist made a groundbreaking ___ in cancer research.</p>
        <label class="block mt-2"><input type="radio" name="q13" value="a" required /> breakup</label>
        <label class="block"><input type="radio" name="q13" value="b" /> breakdown</label>
        <label class="block"><input type="radio" name="q13" value="c" /> breakthrough</label>
        <label class="block"><input type="radio" name="q13" value="d" /> breakout</label>
      </div>
      <div>
        <p class="font-semibold">14. The politician’s speech was filled with ___ and avoided direct answers.</p>
        <label class="block mt-2"><input type="radio" name="q14" value="a" required /> ambiguity</label>
        <label class="block"><input type="radio" name="q14" value="b" /> honesty</label>
        <label class="block"><input type="radio" name="q14" value="c" /> clarity</label>
        <label class="block"><input type="radio" name="q14" value="d" /> simplicity</label>
      </div>
      <div>
        <p class="font-semibold">15. She has a strong ___ in environmental issues.</p>
        <label class="block mt-2"><input type="radio" name="q15" value="a" required /> intend</label>
        <label class="block"><input type="radio" name="q15" value="b" /> introduce</label>
        <label class="block"><input type="radio" name="q15" value="c" /> interrupt</label>
        <label class="block"><input type="radio" name="q15" value="d" /> interest</label>
      </div>

      <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-bold">
        Submit
      </button>

      <p id="result" class="mt-4 text-center font-semibold text-blue-700"></p>
    </form>
  </main>

  <footer class="bg-blue-900 text-white text-center py-4 mt-8">
    <p>&copy; 2025 Smart Learning System. All rights reserved.</p>
  </footer>

<script>
  const BACKEND_URL = "https://english-adjuster-v1.onrender.com"; // ← my Render backend URL
  
  document.getElementById("vocab-form").addEventListener("submit", async function (e) {
    e.preventDefault();

    const correctAnswers = {
      q1: "b", q2: "c", q3: "c", q4: "b", q5: "b", q6: "c",
      q7: "b", q8: "c", q9: "c", q10: "a", q11: "c",
      q12: "b", q13: "b", q14: "c", q15: "a"
    };

    let score = 0, answered = 0;
	let userAnswers = {};
    for (let key in correctAnswers) {
      const selected = document.querySelector(`input[name="${key}"]:checked`);
	  
    //  if (selected) {
    //    answered++;
    //    if (selected.value.trim().toLowerCase() === correctAnswers[key]) score++;
    //  }
    //}

    //  if (answered < Object.keys(correctAnswers).length) {
    //    alert("กรุณาตอบให้ครบทั้ง 15 ข้อก่อนส่งแบบทดสอบ");
    //    return;
    //}	  
	  
	  if (!selected) {
	    alert("กรุณาตอบให้ครบทั้ง 15 ข้อก่อนส่งแบบทดสอบ");
	    return;
      }
      userAnswers[key] = selected.value;
      if (selected.value.trim().toLowerCase() === correctAnswers[key]) score++;	  

    // Save locally 
    sessionStorage.setItem("vocabScore", score);
	
	// Send to backend
	const token = localStorage.getItem("token"); // if using JWT
	try {
		const res = await fetch(`${BACKEND_URL}/api/pretest/vocab`, {
		method: "POST",
		headers: {
		"Content-Type": "application/json",
		"Authorization": token ? `Bearer ${token}` : ""
		},
		body: JSON.stringify({
		score,
		answers: userAnswers
		})
	});
	const data = await res.json();
	console.log("Backend response:", data);
	} catch (err) {
		console.error("Could not send score to backend:", err);
	}	
	
	// Redirect to reading part	
    window.location.href = "pretest-reading.html";
  });
</script>


</body>
</html>
